pipeline {
    agent any
    triggers {
        pollSCM '* * * * *'
    }
    environment {
        CI = false
    }
    stages {
        stage('build') {
            steps {
                echo 'buildingg..'
        sh '''
         npm install
         npm run build
        '''
            }
        }    
        stage('dockerising') {
            steps {
                echo "building"
                sh 'Docker login -u tendomo -p ${DOCKER_PASSWORD}'
                sh 'Docker build -t emmycomingd:0.2 .'
                sh 'Docker tag emmycomingd:0.2 tendomo/emmy2'
                sh 'Docker push tendomo/emmy2 0.2'
            }
        }
        stage('Initialize') {
            steps {
                def dockerHome = tool 'myDocker'
                env.PATH = "${dockerHome}/bin:${env.PATH}"
            }
    }
}
